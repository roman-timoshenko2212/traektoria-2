<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–î–∏–∑–∞–π–Ω –®–∞–≥–∞ 3 - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã</title>
  <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —à—Ä–∏—Ñ—Ç—ã –∫–∞–∫ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º index.html -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet">
  <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª —Å—Ç–∏–ª–µ–π -->
  <link rel="stylesheet" href="../frontend/static/css/styles.css">
  <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Lottie Player -->
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
  <style>
    /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞ –∫–∞—Ä—Ç—ã */
    .map-placeholder {
      border: 1px dashed #ccc;
      min-height: 400px; /* –ü—Ä–∏–º–µ—Ä–Ω–∞—è –≤—ã—Å–æ—Ç–∞ */
      display: flex;
      align-items: center;
      justify-content: center;
      color: #999;
      background-color: #f8f8f8;
      margin-top: 20px;
      margin-bottom: 20px;
      text-align: center;
      padding: 20px;
    }
    /* –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–º–µ–µ—Ç –æ—Ç—Å—Ç—É–ø—ã */
    body {
        padding: 20px;
        background-color: #f4f7f6; /* –§–æ–Ω–æ–≤—ã–π —Ü–≤–µ—Ç –∫–∞–∫ —É body –≤ styles.css */
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è –Ω–æ–≤–æ–≥–æ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ */
    .results-layout {
        position: relative; /* –î–µ–ª–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º –¥–ª—è –∞–±—Å–æ–ª—é—Ç–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ */
        align-items: flex-start;
        margin-top: 30px;
        padding: 20px; /* –î–æ–±–∞–≤–∏–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã */
        background-color: #ffffff; /* –ó–∞–¥–∞–¥–∏–º –±–µ–ª—ã–π —Ñ–æ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
        border-radius: 8px; /* –°–ª–µ–≥–∫–∞ —Å–∫—Ä—É–≥–ª–∏–º —É–≥–ª—ã */
        box-shadow: 0 2px 4px rgba(0,0,0,0.05); /* –õ–µ–≥–∫–∞—è —Ç–µ–Ω—å –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è */
        transition: background-color 0.3s ease-in-out; /* –î–æ–±–∞–≤–ª—è–µ–º –ø–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ —Ñ–æ–Ω–∞ */
    }

    /* –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è #route-info –≤–Ω—É—Ç—Ä–∏ .results-layout */
    #route-info {
        margin-left: 65px; /* –û—Ç—Å—Ç—É–ø —Å–ª–µ–≤–∞, –∫–∞–∫ —É —Ç–∞–±–ª–∏—Ü—ã */
        margin-bottom: 20px; /* –û—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É –ø–µ—Ä–µ–¥ —Ç–∞–±–ª–∏—Ü–µ–π */
        /* margin-top —É–±–∏—Ä–∞–µ–º, —Ç.–∫. –æ–Ω –±—ã–ª –¥–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤–Ω–µ layout */
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏ –∫–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ—Å—á–µ—Ç–∞ */
    .route-info-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 15px; /* –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É –ø–µ—Ä–µ–¥ –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ */
    }

    #recalculate-button {
        background: none;
        border: none;
        padding: 0; /* –£–±–∏—Ä–∞–µ–º padding */
        margin-left: 10px; /* –û—Ç—Å—Ç—É–ø –æ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞ */
        width: 30px;  /* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∏—Ä–∏–Ω–∞ */
        height: 30px; /* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤—ã—Å–æ—Ç–∞ */
        color: #adb5bd; /* –°–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π (–º–æ–∂–µ—Ç –≤–ª–∏—è—Ç—å –Ω–∞ —Ü–≤–µ—Ç –∞–Ω–∏–º–∞—Ü–∏–∏, –µ—Å–ª–∏ –æ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç currentColor) */
        cursor: pointer;
        transition: color 0.2s ease; /* –û—Å—Ç–∞–≤–ª—è–µ–º –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π */
        vertical-align: middle; /* –í—ã—Ä–∞–≤–Ω–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ —Å —Ç–µ–∫—Å—Ç–æ–º */
    }
    #recalculate-button:hover {
        /* –£–±–∏—Ä–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞, —Ç.–∫. —ç—Ç–æ –º–æ–∂–µ—Ç –º–µ—à–∞—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏ */
        /* color: #6c757d; */
    }
    #recalculate-button:disabled {
        /* color: #ced4da; */ /* –í–æ–∑–º–æ–∂–Ω–æ, –Ω–µ –Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å —Ü–≤–µ—Ç –ø—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ */
        cursor: default;
        opacity: 0.6; /* –î–µ–ª–∞–µ–º –∫–Ω–æ–ø–∫—É –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω–æ–π –ø—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ */
    }

    #recalculate-lottie-container {
        width: 100%;
        height: 100%;
        display: flex; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –ø–ª–µ–µ—Ä, –µ—Å–ª–∏ –æ–Ω –º–µ–Ω—å—à–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
        align-items: center;
        justify-content: center;
    }

    /* –°—Ç–∏–ª—å –¥–ª—è –Ω–∞–∑–≤–∞–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ */
    #route-name-header {
        color: #0056b3; /* –¢–µ–º–Ω–æ-—Å–∏–Ω–∏–π */
        /* font-weight: bold; /* –ù–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π, –µ—Å–ª–∏ strong –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ */
        transition: background-color 0.3s ease-in-out; /* –î–æ–±–∞–≤–ª—è–µ–º –ø–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ —Ñ–æ–Ω–∞ */
    }

    /* --- –°–¢–ò–õ–ò –î–õ–Ø –°–û–°–¢–û–Ø–ù–ò–Ø –ü–ï–†–ï–°–ß–ï–¢–ê --- */
    /* –ê–Ω–∏–º–∞—Ü–∏—è –ø—É–ª—å—Å–∞—Ü–∏–∏ –¥–ª—è —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ */
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.6; }
        100% { opacity: 1; }
    }

    .results-layout.recalculating #vertical-route-selector {
        animation: pulse 1.5s ease-in-out infinite;
    }

    /* –ó–∞—Ç–µ–º–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
    .results-layout.recalculating .route-info-cards,
    .results-layout.recalculating .results-table-container {
        opacity: 0.4;
        pointer-events: none;
        transition: opacity 0.3s ease-out;
    }
    /* –í–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–æ—Ä–º–∞–ª—å–Ω—É—é –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å (–¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –≤–æ–∑–≤—Ä–∞—Ç–∞) */
    .results-layout .route-info-cards,
    .results-layout .results-table-container {
        opacity: 1;
        pointer-events: auto;
        transition: opacity 0.3s ease-out;
    }
    /* ------------------------------------ */

    .vertical-route-selector {
        width: 50px; /* –£–≤–µ–ª–∏—á–µ–Ω–æ —Å 40px */
        background-color: #e9ecef;
        border-radius: 5px;
        overflow: hidden;
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        z-index: 10;
        cursor: pointer;
        transition: width 0.3s ease-in-out, background-color 0.2s ease;
    }

    .vertical-route-selector:hover {
        width: 300px; /* –£–≤–µ–ª–∏—á–µ–Ω–æ —Å 250px */
        background-color: #dde2e6;
        box-shadow: 3px 0 8px rgba(0,0,0,0.12); /* –°–ª–µ–≥–∫–∞ —É—Å–∏–ª–µ–Ω–∞ —Ç–µ–Ω—å */
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è –æ–±–µ—Ä—Ç–∫–∏ Lottie-–∞–Ω–∏–º–∞—Ü–∏–∏ */
    .lottie-wrapper {
        width: 38px; /* –ß—É—Ç—å –±–æ–ª—å—à–µ —Ä–∞–∑–º–µ—Ä–∞ –∏–∫–æ–Ω–∫–∏ –¥–ª—è –æ—Ç—Å—Ç—É–ø–æ–≤ */
        height: 38px;
        position: absolute;
        top: 50%;
        left: 25px; /* –ò–∑–º–µ–Ω–µ–Ω–æ —Å 20px –¥–ª—è —Ü–µ–Ω—Ç—Ä–æ–≤–∫–∏ –≤ 50px */
        transform: translate(-50%, -50%); /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –∫—Ä—É–≥ */
        background-color: transparent; /* –°–¥–µ–ª–∞–Ω–æ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
        border-radius: 50%; /* –î–µ–ª–∞–µ–º –∫—Ä—É–≥–ª—ã–º */
        display: flex;
        align-items: center;
        justify-content: center;
        /* –î–æ–±–∞–≤–ª–µ–Ω—ã background-color –∏ box-shadow –≤ transition, –≤—Ä–µ–º—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å —Ä–∞—Å–∫—Ä—ã—Ç–∏–µ–º (0.3s) */
        transition: left 0.3s ease-in-out, background-color 0.9s ease, box-shadow 0.9s ease;
        z-index: 11; /* –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞–¥ —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–º, –Ω–æ –ø–æ–¥ —Ç–µ–∫—Å—Ç–æ–º –≤–Ω—É—Ç—Ä–∏ */
        pointer-events: none; /* –ß—Ç–æ–±—ã –Ω–µ –º–µ—à–∞–ª –∫–ª–∏–∫–∞–º */
        box-shadow: none; /* –¢–µ–Ω—å —É–±—Ä–∞–Ω–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
    }

    /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è Lottie –∞–Ω–∏–º–∞—Ü–∏–∏ –≤–Ω—É—Ç—Ä–∏ –æ–±–µ—Ä—Ç–∫–∏ */
    #lottie-icon-container {
        width: 32px;
        height: 32px;
        /* –£–±–∏—Ä–∞–µ–º –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ç.–∫. —Ç–µ–ø–µ—Ä—å —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ flex */
        position: static;
        transform: none;
        transition: none; /* –£–±–∏—Ä–∞–µ–º transition –æ—Ç—Å—é–¥–∞, –æ–Ω–æ —Ç–µ–ø–µ—Ä—å –Ω–∞ wrapper'–µ */
        z-index: 1; /* –í–Ω—É—Ç—Ä–∏ wrapper'–∞ */
    }

    .route-list {
        list-style: none;
        padding: 10px 0;
        margin: 0;
        width: 100%;
        height: 100%;
        overflow-y: auto;
        opacity: 0;
        transition: opacity 0.2s 0.1s ease-in-out;
        position: relative;
        z-index: 1;
    }

    /* –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è —Å–∫—Ä–æ–ª–ª–±–∞—Ä–∞ –¥–ª—è WebKit –±—Ä–∞—É–∑–µ—Ä–æ–≤ */
    .route-list::-webkit-scrollbar {
      width: 6px; /* –®–∏—Ä–∏–Ω–∞ —Å–∫—Ä–æ–ª–ª–±–∞—Ä–∞ */
    }
    
    .route-list::-webkit-scrollbar-track {
      background: transparent; /* –§–æ–Ω —Ç—Ä–µ–∫–∞ */
       margin: 5px 0; /* –ù–µ–±–æ–ª—å—à–∏–µ –æ—Ç—Å—Ç—É–ø—ã —Å–≤–µ—Ä—Ö—É/—Å–Ω–∏–∑—É —Ç—Ä–µ–∫–∞ */
    }
    
    .route-list::-webkit-scrollbar-thumb {
      background-color: rgba(0, 0, 0, 0.2); /* –¶–≤–µ—Ç –ø–æ–ª–∑—É–Ω–∫–∞ */
      border-radius: 3px; /* –°–∫—Ä—É–≥–ª–µ–Ω–∏–µ –ø–æ–ª–∑—É–Ω–∫–∞ */
      border: 1px solid transparent; /* –û—Ç—Å—Ç—É–ø */
      background-clip: content-box; /* –ß—Ç–æ–±—ã —Ñ–æ–Ω –Ω–µ –≤—ã–ª–µ–∑–∞–ª –∑–∞ –≥—Ä–∞–Ω–∏—Ü—É */
    }

    .route-list::-webkit-scrollbar-thumb:hover {
      background-color: rgba(0, 0, 0, 0.3); /* –¶–≤–µ—Ç –ø–æ–ª–∑—É–Ω–∫–∞ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
    }

    .vertical-route-selector:hover .route-list {
        opacity: 1;
    }

     .route-list-item {
        /* –£–±–∏—Ä–∞–µ–º —á–∞—Å—Ç—å —Å—Ç–∏–ª–µ–π, —Ç.–∫. –æ–Ω–∏ –ø–µ—Ä–µ–π–¥—É—Ç –∫ –¥–æ—á–µ—Ä–Ω–∏–º —ç–ª–µ–º–µ–Ω—Ç–∞–º */
        padding: 0; /* –£–±–∏—Ä–∞–µ–º padding —É —Å–∞–º–æ–≥–æ li */
        /* white-space, overflow, text-overflow —É–±—Ä–∞–Ω—ã */
        border-bottom: 1px solid rgba(0, 0, 0, 0.08); /* –ë–æ–ª–µ–µ —Å–≤–µ—Ç–ª—ã–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å */
        /* transition —É–±—Ä–∞–Ω, hover –±—É–¥–µ—Ç –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º —ç–ª–µ–º–µ–Ω—Ç–µ */
        position: relative;
        z-index: 2;
        /* border-left —É–±—Ä–∞–Ω, hover –±—É–¥–µ—Ç –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º —ç–ª–µ–º–µ–Ω—Ç–µ */
        cursor: pointer; /* –û—Å—Ç–∞–≤–ª—è–µ–º –∫—É—Ä—Å–æ—Ä */
    }

    /* –ù–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤–Ω—É—Ç—Ä–∏ li –¥–ª—è Flexbox */
    .route-list-item-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 15px 10px 15px; /* –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º padding –∑–¥–µ—Å—å */
        /* –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è hover –∏ active */
        border-left: 3px solid transparent;
        transition: background-color 0.2s ease, border-left-color 0.2s ease;
    }

    .route-list-item:hover .route-list-item-content {
        background-color: #f8f9fa; /* –°–≤–µ—Ç–ª—ã–π —Ñ–æ–Ω –ø—Ä–∏ —Ö–æ–≤–µ—Ä–µ */
        border-left-color: var(--primary-color, #007bff); /* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ª–µ–≤—ã–π –±–æ—Ä–¥—é—Ä –ø—Ä–∏ —Ö–æ–≤–µ—Ä–µ */
    }

    /* –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫–∞ */
    .route-list-item.active .route-list-item-content {
        background-color: var(--primary-color, #007bff);
        color: white;
        border-left-color: var(--primary-accent-color, #0056b3);
    }

    /* –ò–º—è –º–∞—Ä—à—Ä—É—Ç–∞ - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —à–∏—Ä–∏–Ω—ã */
    .route-name {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        margin-right: 10px; /* –û—Ç—Å—Ç—É–ø –æ—Ç –∑–Ω–∞—á–∫–æ–≤ */
        flex-grow: 1; /* –ó–∞–Ω–∏–º–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ–µ –º–µ—Å—Ç–æ */
    }

    /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∑–Ω–∞—á–∫–æ–≤ */
    .route-badges {
        display: flex;
        align-items: center;
        gap: 5px; /* –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –º–µ–∂–¥—É –∑–Ω–∞—á–∫–∞–º–∏ */
        flex-shrink: 0; /* –ù–µ —Å–∂–∏–º–∞—Ç—å—Å—è */
    }

    /* –ë–∞–∑–æ–≤—ã–π —Å—Ç–∏–ª—å –∑–Ω–∞—á–∫–∞ */
    .accuracy-count-badge {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        color: white;
        font-size: 0.75em;
        font-weight: bold;
        line-height: 1; /* –£–±—Ä–∞—Ç—å –ª–∏—à–Ω—é—é –≤—ã—Å–æ—Ç—É —Å—Ç—Ä–æ–∫–∏ */
        box-sizing: border-box; /* –û–±–≤–æ–¥–∫–∞ –Ω–µ –±—É–¥–µ—Ç —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä */
    }

    /* –¶–≤–µ—Ç –¥–ª—è —Å—Ä–µ–¥–Ω–µ–π —Ç–æ—á–Ω–æ—Å—Ç–∏ (–æ—Ä–∞–Ω–∂–µ–≤—ã–π) */
    .badge-medium {
        background-color: #fd7e14; /* Bootstrap orange */
    }

    /* –¶–≤–µ—Ç –¥–ª—è –Ω–∏–∑–∫–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏ (–∫—Ä–∞—Å–Ω—ã–π) */
    .badge-low {
        background-color: #dc3545; /* Bootstrap red */
    }

    .route-list-item:last-child {
        border-bottom: none;
    }

    .results-table-container {
        margin-left: 65px; /* –û—Ç—Å—Ç—É–ø = –Ω–æ–≤–∞—è —à–∏—Ä–∏–Ω–∞ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ (50px) + –∑–∞–∑–æ—Ä (15px) */
        width: calc(100% - 65px); /* –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–æ —Å 55px */
        position: relative;
        transition: opacity 0.3s ease-in-out;
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è –∑–∞—Ç–µ–º–Ω–µ–Ω–∏—è - –ü–ï–†–ï–ù–ï–°–ï–ù–´ –ù–ê .results-layout */
    /*
    .results-table-container::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.15); 
        z-index: 5;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease-in-out;
    }

    .vertical-route-selector:hover + .results-table-container::after {
        opacity: 1;
    }
    */

    /* --- –°–¢–ò–õ–ò –î–õ–Ø –û–í–ï–†–õ–ï–Ø –ó–ê–¢–ï–ú–ù–ï–ù–ò–Ø --- */
    .results-layout::after {
        content: '';
        position: absolute;
        top: 0;
        left: 50px; /* –ù–∞—á–∞–ª—å–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ - —Å–ø—Ä–∞–≤–∞ –æ—Ç —Å–≤–µ—Ä–Ω—É—Ç–æ–≥–æ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ */
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.08); /* –°–ª–µ–≥–∫–∞ —Ç–µ–º–Ω—ã–π –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω */
        z-index: 5; /* –ù–∏–∂–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ (10) –∏ –∏–∫–æ–Ω–∫–∏ (11), –Ω–æ –≤—ã—à–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
        opacity: 0; /* –°–∫—Ä—ã—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
        pointer-events: none; /* –ù–µ –º–µ—à–∞–µ—Ç –∫–ª–∏–∫–∞–º */
        transition: opacity 0.3s ease-in-out, left 0.3s ease-in-out; /* –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –∏ —Å–¥–≤–∏–≥ */
        border-radius: 0 8px 8px 0; /* –°–∫—Ä—É–≥–ª—è–µ–º —É–≥–ª—ã —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —Å layout (–∫—Ä–æ–º–µ –ª–µ–≤–æ–≥–æ –≤–µ—Ä—Ö–Ω–µ–≥–æ/–Ω–∏–∂–Ω–µ–≥–æ) */
    }

    /* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏ —Å–¥–≤–∏–≥–∞–µ–º –æ–≤–µ—Ä–ª–µ–π –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ —Å–µ–ª–µ–∫—Ç–æ—Ä */
    .results-layout:has(> #vertical-route-selector:hover)::after {
        opacity: 1;
        left: 300px; /* –°–¥–≤–∏–≥–∞–µ–º –≤–ø—Ä–∞–≤–æ –∑–∞ —Ä–∞—Å–∫—Ä—ã—Ç—ã–π —Å–µ–ª–µ–∫—Ç–æ—Ä */
    }
    /* -------------------------------------- */

    /* –ü–æ–∑–∏—Ü–∏—è –∏ —Å—Ç–∏–ª—å –ö–†–£–ì–ê –ø—Ä–∏ —Ä–∞—Å–∫—Ä—ã—Ç–∏–∏ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ */
    .vertical-route-selector:hover .lottie-wrapper {
        left: 270px; /* –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–æ: 300px (–Ω–æ–≤–∞—è —à–∏—Ä–∏–Ω–∞) - 30px (–æ—Ç—Å—Ç—É–ø) */
        background-color: #f8f9fa; /* –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ñ–æ–Ω –ø—Ä–∏ —Ö–æ–≤–µ—Ä–µ */
        box-shadow: 0 0 3px rgba(0,0,0,0.1); /* –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–µ–Ω—å –ø—Ä–∏ —Ö–æ–≤–µ—Ä–µ */
    }

    /* --- –ù–û–í–´–ï –°–¢–ò–õ–ò –î–õ–Ø –¢–ê–ë–õ–ò–¶–´ --- */
    .table {
        width: 100%; /* –¢–∞–±–ª–∏—Ü–∞ –∑–∞–Ω–∏–º–∞–µ—Ç –≤—Å—é —à–∏—Ä–∏–Ω—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
        border-collapse: collapse; /* –£–±–∏—Ä–∞–µ–º –¥–≤–æ–π–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã */
        margin-top: 15px; /* –ù–µ–±–æ–ª—å—à–æ–π –æ—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É */
        font-size: 0.9rem; /* –ß—É—Ç—å —É–º–µ–Ω—å—à–∏–º —à—Ä–∏—Ñ—Ç –¥–ª—è –∫–æ–º–ø–∞–∫—Ç–Ω–æ—Å—Ç–∏ */
        table-layout: fixed; /* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∏—Ä–∏–Ω–∞ —Å—Ç–æ–ª–±—Ü–æ–≤ */
    }

    /* –°—Ç–∏–ª—å –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Ç–∞–±–ª–∏—Ü—ã */
    .table thead th {
        background-color: #e9ecef; /* –î–µ–ª–∞–µ–º —Ñ–æ–Ω —Ç–µ–º–Ω–µ–µ */
        color: #495057; /* –¢–µ–º–Ω–æ-—Å–µ—Ä—ã–π —Ç–µ–∫—Å—Ç */
        text-align: left; /* –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ –ª–µ–≤–æ–º—É –∫—Ä–∞—é */
        padding: 12px 15px; /* –û—Ç—Å—Ç—É–ø—ã */
        border-bottom: 2px solid #dee2e6; /* –ù–∏–∂–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞ */
        font-weight: 500; /* –°—Ä–µ–¥–Ω—è—è –∂–∏—Ä–Ω–æ—Å—Ç—å */
    }

    /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –¢–û–õ–¨–ö–û –Ω–æ–º–µ—Ä–∞ */
    .table thead th:first-child,
    .table tbody td:first-child { /* –£–±–∏—Ä–∞–µ–º :nth-child(5) */
        text-align: center;
    }

    /* –ó–∞–¥–∞–Ω–∏–µ —à–∏—Ä–∏–Ω—ã —Å—Ç–æ–ª–±—Ü–æ–≤ */
    .table thead th:nth-child(1) { width: 5%; }  /* ‚Ññ */
    .table thead th:nth-child(2) { width: 30%; } /* –ò—Å—Ö–æ–¥–Ω—ã–π –∞–¥—Ä–µ—Å */
    .table thead th:nth-child(3) { width: 30%; } /* –ù–∞–π–¥–µ–Ω–Ω—ã–π –∞–¥—Ä–µ—Å */
    .table thead th:nth-child(4) { width: 15%; } /* –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã */
    .table thead th:nth-child(5) { width: 20%; } /* –¢–æ—á–Ω–æ—Å—Ç—å */

    /* –°—Ç–∏–ª—å —è—á–µ–µ–∫ —Ç–∞–±–ª–∏—Ü—ã */
    .table tbody td {
        padding: 10px 15px; /* –û—Ç—Å—Ç—É–ø—ã */
        border-bottom: 1px solid #e9ecef; /* –¢–æ–Ω–∫–∞—è —Å–µ—Ä–∞—è –ª–∏–Ω–∏—è –º–µ–∂–¥—É —Å—Ç—Ä–æ–∫–∞–º–∏ */
        vertical-align: middle; /* –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É */
        color: #212529; /* –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —á–µ—Ä–Ω—ã–π —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
        transition: background-color 0.3s ease-in-out, opacity 0.3s ease-out; /* –î–æ–±–∞–≤–ª—è–µ–º opacity –≤ transition */
        word-break: break-word; /* –ü–µ—Ä–µ–Ω–æ—Å –¥–ª–∏–Ω–Ω—ã—Ö —Å–ª–æ–≤/—Å—Ç—Ä–æ–∫ */
        /* opacity: 1; /* –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∏–¥–∏–º—ã */
    }

    /* –ö–ª–∞—Å—Å –¥–ª—è –∑–∞—Ç—É—Ö–∞–Ω–∏—è —è—á–µ–π–∫–∏ */
    .cell-fading-out {
        opacity: 0;
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è –∏–∫–æ–Ω–∫–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∞–¥—Ä–µ—Å–∞ */
    .edit-icon {
        opacity: 0; /* –°–∫—Ä—ã—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
        margin-left: 8px;
        cursor: pointer;
        transition: opacity 0.2s ease-in-out;
        display: inline-block; /* –ß—Ç–æ–±—ã margin —Ä–∞–±–æ—Ç–∞–ª */
        vertical-align: middle; /* –í—ã—Ä–∞–≤–Ω–∏–≤–∞–µ–º –∏–∫–æ–Ω–∫—É –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
    }

    /* –ó–∞–¥–∞–µ–º —Ä–∞–∑–º–µ—Ä –¥–ª—è SVG –≤–Ω—É—Ç—Ä–∏ –∏–∫–æ–Ω–∫–∏ */
    .edit-icon svg {
        width: 18px; /* –ò–ª–∏ 1em */
        height: 18  px; /* –ò–ª–∏ 1em */
        display: block; /* –£–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–µ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –ø–æ–¥ SVG */
        fill: currentColor; /* –ü–æ–∑–≤–æ–ª—è–µ–º —Ü–≤–µ—Ç—É –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª—è (.edit-icon –∏–ª–∏ CSS) */
        stroke: currentColor; /* –ü–æ–∑–≤–æ–ª—è–µ–º —Ü–≤–µ—Ç—É –æ–±–≤–æ–¥–∫–∏ –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è */
    }

    /* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–∫–æ–Ω–∫—É –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ —Å—Ç—Ä–æ–∫—É */
    .table tbody tr:hover .edit-icon {
        opacity: 1;
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è —è—á–µ–π–∫–∏ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø–æ–ª—è –≤–≤–æ–¥–∞ */
    .table tbody td.editing {
        padding: 0; /* –£–±–∏—Ä–∞–µ–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã —è—á–µ–π–∫–∏ */
    }
    .table tbody td.editing input[type="text"] {
        width: 100%;
        padding: 10px 15px; /* –û—Ç—Å—Ç—É–ø—ã –∫–∞–∫ —É —è—á–µ–π–∫–∏ */
        border: none;
        background-color: #fff; /* –ë–µ–ª—ã–π —Ñ–æ–Ω –¥–ª—è –ø–æ–ª—è */
        font-size: inherit; /* –ù–∞—Å–ª–µ–¥—É–µ–º —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ */
        font-family: inherit; /* –ù–∞—Å–ª–µ–¥—É–µ–º —à—Ä–∏—Ñ—Ç */
        box-sizing: border-box; /* padding –Ω–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —à–∏—Ä–∏–Ω—É */
        outline: 2px solid var(--primary-color, #007bff); /* –í—ã–¥–µ–ª—è–µ–º –ø–æ–ª–µ */
    }

    /* –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ç—Ä–æ–∫ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ - –í–û–ó–í–†–ê–©–ê–ï–ú */
    .table tbody tr {
        opacity: 0;
        transform: translateY(15px);
        transition: opacity 0.4s ease-out, transform 0.4s ease-out;
    }

    /* –í–∏–¥–∏–º–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ç—Ä–æ–∫ - –í–û–ó–í–†–ê–©–ê–ï–ú */
    .table tbody tr.row-visible {
        opacity: 1;
        transform: translateY(0);
    }

    /* –ß–µ—Ä–µ–¥–æ–≤–∞–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤ —Å—Ç—Ä–æ–∫ ("–∑–µ–±—Ä–∞") */
    .table tbody tr:nth-of-type(even) {
        background-color: #f8f9fa; /* –°–ª–µ–≥–∫–∞ —Å–µ—Ä—ã–π —Ñ–æ–Ω –¥–ª—è —á–µ—Ç–Ω—ã—Ö —Å—Ç—Ä–æ–∫ */
    }

    /* –£–±–∏—Ä–∞–µ–º –Ω–∏–∂–Ω—é—é –≥—Ä–∞–Ω–∏—Ü—É —É –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å—Ç—Ä–æ–∫–∏ */
    .table tbody tr:last-of-type td {
        border-bottom: none;
    }

    /* –°—Ç–∏–ª—å –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏ */
    .table .accuracy-display {
        display: inline-block; /* –ß—Ç–æ–±—ã –∑–∞–Ω–∏–º–∞–ª–æ —Å—Ç—Ä–æ–∫—É */
        white-space: normal; /* –†–∞–∑—Ä–µ—à–∞–µ–º –ø–µ—Ä–µ–Ω–æ—Å —Å–ª–æ–≤ –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö –æ–ø–∏—Å–∞–Ω–∏–π */
        /* –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –µ—â–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Ç–æ—á–Ω–æ—Å—Ç–∏, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ */
    }
    /* ------------------------------------- */

    /* --- –ù–û–í–´–ï –°–¢–ò–õ–ò –î–õ–Ø –í–´–î–ï–õ–ï–ù–ò–Ø –°–¢–†–û–ö –ü–û –¢–û–ß–ù–û–°–¢–ò --- */

    /* –í—ã–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è —Å—Ä–µ–¥–Ω–µ–π —Ç–æ—á–Ω–æ—Å—Ç–∏ */
    .table tbody tr.row-accuracy-medium td {
        background-color: #fff3e0; /* –°–≤–µ—Ç–ª–æ-–æ—Ä–∞–Ω–∂–µ–≤—ã–π */
    }
    /* –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–µ–±—Ä—ã –¥–ª—è —á–µ—Ç–Ω—ã—Ö —Å—Ç—Ä–æ–∫ —Å—Ä–µ–¥–Ω–µ–π —Ç–æ—á–Ω–æ—Å—Ç–∏ */
    .table tbody tr.row-accuracy-medium:nth-of-type(even) td {
        background-color: #fff3e0; /* –¢–æ—Ç –∂–µ —Å–≤–µ—Ç–ª–æ-–æ—Ä–∞–Ω–∂–µ–≤—ã–π */
    }

    /* –í—ã–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è –Ω–∏–∑–∫–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏ */
    .table tbody tr.row-accuracy-low td {
        background-color: #ffebee; /* –°–≤–µ—Ç–ª–æ-–∫—Ä–∞—Å–Ω—ã–π */
    }
    /* –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–µ–±—Ä—ã –¥–ª—è —á–µ—Ç–Ω—ã—Ö —Å—Ç—Ä–æ–∫ –Ω–∏–∑–∫–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏ */
    .table tbody tr.row-accuracy-low:nth-of-type(even) td {
        background-color: #ffebee; /* –¢–æ—Ç –∂–µ —Å–≤–µ—Ç–ª–æ-–∫—Ä–∞—Å–Ω—ã–π */
    }

     /* –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –Ω–µ–º–Ω–æ–≥–æ –∑–∞—Ç–µ–º–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç –Ω–∞ –≤—ã–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫–∞—Ö –¥–ª—è –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞ */
    .table tbody tr.row-accuracy-medium td,
    .table tbody tr.row-accuracy-low td {
        color: #333;
    }
    /* ---------------------------------------------------- */

    /* –°—Ç–∏–ª–∏ –¥–ª—è –æ–±–µ—Ä—Ç–∫–∏ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –≤—ã—Å–æ—Ç—ã */
    #table-scroll-wrapper {
        /* overflow-x –∏ overflow-y –∑–∞–¥–∞–Ω—ã –∏–Ω–ª–∞–π–Ω–æ–≤–æ */
        transition: height 0.4s ease-out; /* –ê–Ω–∏–º–∞—Ü–∏—è –≤—ã—Å–æ—Ç—ã */
    }

  </style>
</head>
<body>
  <!-- –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —à–∏—Ä–∏–Ω—ã -->
  <div class="container">
      <!-- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –®–∞–≥–∞ 3 -->
      <div id="step-3-content" class="step-content">
        <div class="card">
          <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –º–∞—Ä—à—Ä—É—Ç–∞</h2>

          <!-- –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä –¥–ª—è –∫–∞—Ä—Ç—ã -->
          <div id="map-placeholder-container" class="map-placeholder">
             (–ó–¥–µ—Å—å –±—É–¥–µ—Ç –∫–∞—Ä—Ç–∞ –º–∞—Ä—à—Ä—É—Ç–∞)
          </div>

          <!-- –ù–æ–≤—ã–π layout –¥–ª—è —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ –∏ —Ç–∞–±–ª–∏—Ü—ã -->
          <div class="results-layout">

             <!-- –ü–µ—Ä–µ–º–µ—â–∞–µ–º –±–ª–æ–∫ #route-info —Å—é–¥–∞ -->
             <div id="route-info" style="/* margin-top: 30px; —É–±—Ä–∞–Ω */">
               <div class="route-info-header"> <!-- –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏ –∫–Ω–æ–ø–∫–∏ -->
                 <h3 style="margin: 0;">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–∞—Ä—à—Ä—É—Ç–µ <strong id="route-name-header"></strong></h3> <!-- –£–±–∏—Ä–∞–µ–º margin —É h3 -->
                 <button id="recalculate-button" class="recalculate-btn" title="–ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç">
                   <div id="recalculate-lottie-container"></div> <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è Lottie -->
                 </button> <!-- –ö–Ω–æ–ø–∫–∞ –ü–µ—Ä–µ—Å—á–µ—Ç–∞ -->
               </div>
               <div class="route-info-cards">
                   <div class="result-card">
                       <div class="result-label">–û–±—â–µ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ</div>
                       <div class="result-value" id="distance-value">-</div>
                     </div>
                     <div class="result-card">
                       <div class="result-label">–í—Ä–µ–º—è –≤ –ø—É—Ç–∏</div>
                       <div class="result-value" id="duration-value">-</div>
                     </div>
                     <div class="result-card">
                       <div class="result-label">–í—Ä–µ–º—è –Ω–∞ –º–∞—Ä—à—Ä—É—Ç–µ</div>
                       <div class="result-value" id="total-route-time-value">-</div>
                     </div>
               </div>
             </div>

            <!-- –ù–æ–≤—ã–π –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Å–µ–ª–µ–∫—Ç–æ—Ä -->
            <div id="vertical-route-selector" class="vertical-route-selector">
              <!-- –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è Lottie –∞–Ω–∏–º–∞—Ü–∏–∏ -->
              <div class="lottie-wrapper">
                <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è Lottie –∞–Ω–∏–º–∞—Ü–∏–∏ -->
                <div id="lottie-icon-container"></div>
              </div>
              <!-- –°–ø–∏—Å–æ–∫ –º–∞—Ä—à—Ä—É—Ç–æ–≤ -->
              <ul id="route-list" class="route-list">
                <!-- –≠–ª–µ–º–µ–Ω—Ç—ã —Å–ø–∏—Å–∫–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
              </ul>
            </div>

            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã (–¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —à–∏—Ä–∏–Ω–æ–π) -->
            <div class="results-table-container">
              <!-- –¢–∞–±–ª–∏—Ü–∞ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è -->
              <div id="results-container">
                <h3>–ì–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–¥—Ä–µ—Å–∞</h3>
                <div id="table-scroll-wrapper" style="overflow-x: auto; overflow-y: hidden;">
                  <table class="table">
                     <thead>
                      <tr>
                        <th>‚Ññ</th>
                        <th>–ò—Å—Ö–æ–¥–Ω—ã–π –∞–¥—Ä–µ—Å</th>
                        <th>–ù–∞–π–¥–µ–Ω–Ω—ã–π –∞–¥—Ä–µ—Å</th>
                        <th>–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã</th>
                        <th>–¢–æ—á–Ω–æ—Å—Ç—å</th>
                      </tr>
                    </thead>
                    <tbody id="geocoder-table">
                      <tr><td colspan="5" style="text-align: center;">–í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Ä—à—Ä—É—Ç –∏–∑ —Å–ø–∏—Å–∫–∞ —Å–ª–µ–≤–∞</td></tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>

          </div> <!-- –ö–æ–Ω–µ—Ü results-layout -->

          <!-- –ö–Ω–æ–ø–∫–∏ -->
          <div class="buttons-container" style="margin-top: 30px; display: flex; gap: 10px;">
            <button type="button" class="btn btn-outline">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
            <button type="button" class="btn">–†–µ–∑—é–º–µ</button>
          </div>
        </div>
      </div>
      <!-- –ö–æ–Ω–µ—Ü —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –®–∞–≥–∞ 3 -->
  </div> <!-- –ö–æ–Ω–µ—Ü div.container -->

<script>
  // --- –ü—Ä–∏–º–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ ---
  const exampleRouteData = {
    "route1": {
      name: "–ú–∞—Ä—à—Ä—É—Ç 1 (–í–æ—Ä–æ–Ω–µ–∂)",
      distance: "123 –∫–º",
      duration: "2 —á 15 –º–∏–Ω",
      totalTime: "3 —á 05 –º–∏–Ω",
      points: [
        { row: 1, input: "–≥ –í–æ—Ä–æ–Ω–µ–∂, —É–ª –õ–µ–Ω–∏–Ω–∞, –¥ 10", found: "–í–æ—Ä–æ–Ω–µ–∂, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞, 10", coords: "51.6608, 39.2003", accuracy: "–¢–æ—á–Ω—ã–π" },
        { row: 2, input: "–≥–æ—Ä. –í–æ—Ä–æ–Ω–µ–∂, –ú–æ—Å–∫–æ–≤—Å–∫–∏–π –ø—Ä-–∫—Ç, 150", found: "–í–æ—Ä–æ–Ω–µ–∂, –ú–æ—Å–∫–æ–≤—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç, 150", coords: "51.7187, 39.1781", accuracy: "–ü—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã–π" },
        { row: 3, input: "–í–æ—Ä–æ–Ω–µ–∂, –Ω–∞–±. –ú–∞—Å—Å–∞–ª–∏—Ç–∏–Ω–æ–≤–∞, 20", found: "–í–æ—Ä–æ–Ω–µ–∂, –Ω–∞–±–µ—Ä–µ–∂–Ω–∞—è –ú–∞—Å—Å–∞–ª–∏—Ç–∏–Ω–æ–≤–∞, 20", coords: "51.6721, 39.2115", accuracy: "–¢–æ—á–Ω—ã–π" }
      ]
    },
    "route2": {
      name: "–ú–∞—Ä—à—Ä—É—Ç 2 (–õ–∏–ø–µ—Ü–∫)",
      distance: "88 –∫–º",
      duration: "1 —á 40 –º–∏–Ω",
      totalTime: "2 —á 30 –º–∏–Ω",
      points: [
        { row: 1, input: "–õ–∏–ø–µ—Ü–∫, –°–æ–≤–µ—Ç—Å–∫–∞—è 4", found: "–õ–∏–ø–µ—Ü–∫, –°–æ–≤–µ—Ç—Å–∫–∞—è —É–ª–∏—Ü–∞, 4", coords: "52.6098, 39.5984", accuracy: "–¢–æ—á–Ω—ã–π" },
        { row: 3, input: "–õ–∏–ø–µ—Ü–∫, –ö–∞—Ç—É–∫–æ–≤–∞, –≤–ª 51", found: "–õ–∏–ø–µ—Ü–∫, —É–ª–∏—Ü–∞ –ö–∞—Ç—É–∫–æ–≤–∞, 51", coords: "52.5738, 39.5328", accuracy: "–¢–æ—á–Ω—ã–π" },
        { row: 4, input: "—É–ª. –ú–æ—Å–∫–æ–≤—Å–∫–∞—è –≥. –õ–∏–ø–µ—Ü–∫ –¥. 103", found: "–õ–∏–ø–µ—Ü–∫, –ú–æ—Å–∫–æ–≤—Å–∫–∞—è —É–ª–∏—Ü–∞, 103", coords: "52.6260, 39.5419", accuracy: "–¢–æ—á–Ω—ã–π" },
        { row: 5, input: "–õ–∏–ø–µ—Ü–∫, –ü–æ–ª–∏–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è —É–ª–∏—Ü–∞, 10", found: "–õ–∏–ø–µ—Ü–∫, –ü–æ–ª–∏–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è —É–ª–∏—Ü–∞, 10", coords: "52.6181, 39.5715", accuracy: "–£–ª–∏—Ü–∞" },
        { row: 6, input: "–õ–∏–ø–µ—Ü–∫, –ì–∞–≥–∞—Ä–∏–Ω–∞", found: "–õ–∏–ø–µ—Ü–∫, —É–ª–∏—Ü–∞ –ì–∞–≥–∞—Ä–∏–Ω–∞", coords: "52.6050, 39.5750", accuracy: "–ü—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã–π" },
        { row: 2, input: "–õ–∏–ø–µ—Ü–∫ –ø–ª –ü–µ—Ç—Ä–∞ –í–µ–ª–∏–∫–æ–≥–æ", found: "–õ–∏–ø–µ—Ü–∫, –ø–ª–æ—â–∞–¥—å –ü–µ—Ç—Ä–∞ –í–µ–ª–∏–∫–æ–≥–æ", coords: "52.6125, 39.6033", accuracy: "–û–±–ª–∞—Å—Ç—å" },
        { row: 7, input: "–õ–∏–ø–µ—Ü–∫, –≥–æ—Ä–æ–¥", found: "–õ–∏–ø–µ—Ü–∫", coords: "52.6, 39.5", accuracy: "–ì–æ—Ä–æ–¥" },
        { row: 8, input: "–õ–∏–ø–µ—Ü–∫–∞—è –æ–±–ª–∞—Å—Ç—å", found: "–õ–∏–ø–µ—Ü–∫–∞—è –æ–±–ª–∞—Å—Ç—å", coords: "52.5, 39.0", accuracy: "–û–±–ª–∞—Å—Ç—å" }
      ]
    },
    "route3": {
      name: "–ú–∞—Ä—à—Ä—É—Ç 3 (–¢–∞–º–±–æ–≤)",
      distance: "155 –∫–º",
      duration: "2 —á 50 –º–∏–Ω",
      totalTime: "3 —á 55 –º–∏–Ω",
      points: [
        { row: 1, input: "–¢–∞–º–±–æ–≤, —É–ª. –°–æ–≤–µ—Ç—Å–∫–∞—è, –¥. 100", found: "–¢–∞–º–±–æ–≤, –°–æ–≤–µ—Ç—Å–∫–∞—è —É–ª–∏—Ü–∞, 100", coords: "52.7212, 41.4510", accuracy: "–¢–æ—á–Ω—ã–π" },
        { row: 2, input: "–¢–∞–º–±–æ–≤, —É–ª. –ú–∏—á—É—Ä–∏–Ω—Å–∫–∞—è, 130", found: "–¢–∞–º–±–æ–≤, –ú–∏—á—É—Ä–∏–Ω—Å–∫–∞—è —É–ª–∏—Ü–∞, 130", coords: "52.7488, 41.4230", accuracy: "–¢–æ—á–Ω—ã–π" },
        { row: 3, input: "–¢–∞–º–±–æ–≤ —É–ª –†—ã–ª–µ–µ–≤–∞ 50", found: "–¢–∞–º–±–æ–≤, —É–ª–∏—Ü–∞ –†—ã–ª–µ–µ–≤–∞, 50", coords: "52.7182, 41.4174", accuracy: "–¢–æ—á–Ω—ã–π" },
        { row: 4, input: "–¢–∞–º–±–æ–≤, –±—É–ª—å–≤–∞—Ä –≠–Ω—Ç—É–∑–∏–∞—Å—Ç–æ–≤, 1", found: "–¢–∞–º–±–æ–≤, –±—É–ª—å–≤–∞—Ä –≠–Ω—Ç—É–∑–∏–∞—Å—Ç–æ–≤, 1", coords: "52.7615, 41.4011", accuracy: "–¢–æ—á–Ω—ã–π" },
        { row: 5, input: "–¢–∞–º–±–æ–≤, —É–ª. –ë–∞—Å—Ç–∏–æ–Ω–Ω–∞—è, 29", found: "–¢–∞–º–±–æ–≤, –ë–∞—Å—Ç–∏–æ–Ω–Ω–∞—è —É–ª–∏—Ü–∞, 29", coords: "52.7251, 41.3990", accuracy: "–¢–æ—á–Ω—ã–π" }
      ]
    },
    "route4": {
      name: "–ú–∞—Ä—à—Ä—É—Ç 4 (–ö—É—Ä—Å–∫)",
      distance: "210 –∫–º",
      duration: "3 —á 30 –º–∏–Ω",
      totalTime: "4 —á 45 –º–∏–Ω",
      points: [
        { row: 1, input: "–ö—É—Ä—Å–∫, –õ–µ–Ω–∏–Ω–∞, 77", found: "–ö—É—Ä—Å–∫, —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞, 77", coords: "51.7383, 36.1950", accuracy: "–¢–æ—á–Ω—ã–π" },
        { row: 2, input: "–ö—É—Ä—Å–∫, —É–ª. –ö–∞—Ä–ª–∞ –ú–∞—Ä–∫—Å–∞, 68", found: "–ö—É—Ä—Å–∫, —É–ª–∏—Ü–∞ –ö–∞—Ä–ª–∞ –ú–∞—Ä–∫—Å–∞, 68", coords: "51.7604, 36.1763", accuracy: "–¢–æ—á–Ω—ã–π" },
        { row: 3, input: "–ö—É—Ä—Å–∫, —É–ª. 50 –ª–µ—Ç –û–∫—Ç—è–±—Ä—è, 94", found: "–ö—É—Ä—Å–∫, —É–ª–∏—Ü–∞ 50 –ª–µ—Ç –û–∫—Ç—è–±—Ä—è, 94", coords: "51.7311, 36.1364", accuracy: "–¢–æ—á–Ω—ã–π" },
        { row: 4, input: "–ö—É—Ä—Å–∫, –ø—Ä–æ—Å–ø–µ–∫—Ç –ö—É–ª–∞–∫–æ–≤–∞, 20", found: "–ö—É—Ä—Å–∫, –ø—Ä–æ—Å–ø–µ–∫—Ç –ö—É–ª–∞–∫–æ–≤–∞, 20", coords: "51.6955, 36.1406", accuracy: "–¢–æ—á–Ω—ã–π" },
        { row: 5, input: "–ö—É—Ä—Å–∫, –°—Ç—É–¥–µ–Ω—á–µ—Å–∫–∞—è —É–ª–∏—Ü–∞, 1", found: "–ö—É—Ä—Å–∫, –°—Ç—É–¥–µ–Ω—á–µ—Å–∫–∞—è —É–ª–∏—Ü–∞, 1", coords: "51.7430, 36.1468", accuracy: "–¢–æ—á–Ω—ã–π" }
      ]
    }
  };

  // --- –≠–ª–µ–º–µ–Ω—Ç—ã DOM --- 
  const verticalRouteSelector = document.getElementById('vertical-route-selector'); 
  const routeListContainer = document.getElementById('route-list');
  const distanceValueEl = document.getElementById('distance-value');
  const durationValueEl = document.getElementById('duration-value');
  const totalTimeValueEl = document.getElementById('total-route-time-value');
  const geocoderTableBody = document.getElementById('geocoder-table');
  const lottieIconContainer = document.getElementById('lottie-icon-container');
  const routeNameHeaderEl = document.getElementById('route-name-header');
  
  let currentSelectedRouteId = null;
  let lottiePlayer = null;
  let recalculateLottiePlayer = null; // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è –ø–ª–µ–µ—Ä–∞ –∫–Ω–æ–ø–∫–∏
  let previousDistance = 0; // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è
  let previousDurationMinutes = 0; // –ü—Ä–µ–¥—ã–¥—É—â–µ–µ –≤—Ä–µ–º—è –≤ –ø—É—Ç–∏ (–º–∏–Ω)
  let previousTotalTimeMinutes = 0; // –ü—Ä–µ–¥—ã–¥—É—â–µ–µ –≤—Ä–µ–º—è –Ω–∞ –º–∞—Ä—à—Ä—É—Ç–µ (–º–∏–Ω)

  // –°–æ–¥–µ—Ä–∂–∏–º–æ–µ SVG –∏–∫–æ–Ω–∫–∏ –∫–∞—Ä–∞–Ω–¥–∞—à–∞ (–ó–ê–ú–ï–ù–Ø–ï–ú –ù–ê –ù–û–í–´–ô SVG)
  const pencilSvgIcon = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="#a1abb3" fill-rule="evenodd" d="M6.169 6.331a3 3 0 0 0-.833 1.6l-.338 1.912a1 1 0 0 0 1.159 1.159l1.912-.338a3 3 0 0 0 1.6-.833l3.07-3.07l2-2A.894.894 0 0 0 15 4.13A3.13 3.13 0 0 0 11.87 1a.894.894 0 0 0-.632.262l-2 2l-3.07 3.07Zm3.936-1.814L7.229 7.392a1.5 1.5 0 0 0-.416.8L6.6 9.4l1.208-.213l.057-.01a1.5 1.5 0 0 0 .743-.406l2.875-2.876a1.63 1.63 0 0 0-1.378-1.378m2.558.199a3.143 3.143 0 0 0-1.379-1.38l.82-.82a1.63 1.63 0 0 1 1.38 1.38l-.82.82ZM8 2.25a.75.75 0 0 0-.75-.75H4.5a3 3 0 0 0-3 3v7a3 3 0 0 0 3 3h7a3 3 0 0 0 3-3V8.75a.75.75 0 0 0-1.5 0v2.75a1.5 1.5 0 0 1-1.5 1.5h-7A1.5 1.5 0 0 1 3 11.5v-7A1.5 1.5 0 0 1 4.5 3h2.75A.75.75 0 0 0 8 2.25" clip-rule="evenodd"/></svg>`;

  // --- –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ—á–Ω–æ—Å—Ç–∏ --- 
  function getAccuracyDisplay(accuracy) {
    if (!accuracy) {
        // –§–æ—Ä–º–∞—Ç –¥–ª—è "–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ"
        return '<span class="accuracy-display accuracy-unknown">‚ùì –ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ</span>';
    }
    const accLower = accuracy.toLowerCase();
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Ñ–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞ –°–¢–†–û–ì–û –ø–æ —Å–ª–æ–≤–∞—Ä—é TYPE_DESCRIPTIONS (–≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ)
    if (accLower.includes('–∑–¥–∞–Ω–∏–µ')) {
        return '<span class="accuracy-display accuracy-high">üè† –ó–¥–∞–Ω–∏–µ ‚Äî –≤—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å</span>';
    } else if (accLower.includes('—Ç–æ—á–Ω—ã–π')) { // –û–±—â–∏–π —Å–ª—É—á–∞–π –≤—ã—Å–æ–∫–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏
        return '<span class="accuracy-display accuracy-high">üìç –¢–æ—á–∫–∞ ‚Äî –≤—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å</span>';
    } else if (accLower.includes('—É–ª–∏—Ü–∞')) {
        return '<span class="accuracy-display accuracy-medium">üìç –£–ª–∏—Ü–∞ ‚Äî —Å—Ä–µ–¥–Ω—è—è —Ç–æ—á–Ω–æ—Å—Ç—å</span>'; // –í —Å–ª–æ–≤–∞—Ä–µ –¥–ª—è street "üìç"
    } else if (accLower.includes('–ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã–π')) { // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–µ–∫—Ä–µ—Å—Ç–æ–∫ –∫–∞–∫ –ø—Ä–∏–º–µ—Ä —Å—Ä–µ–¥–Ω–µ–π —Ç–æ—á–Ω–æ—Å—Ç–∏
        return '<span class="accuracy-display accuracy-medium">üö¶ –ü–µ—Ä–µ–∫—Ä–µ—Å—Ç–æ–∫ ‚Äî —Å—Ä–µ–¥–Ω—è—è —Ç–æ—á–Ω–æ—Å—Ç—å</span>';
    } else if (accLower.includes('–≥–æ—Ä–æ–¥') || accLower.includes('–æ–±–ª–∞—Å—Ç—å')) { // –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–∞—Å–µ–ª–µ–Ω–Ω—ã–π –ø—É–Ω–∫—Ç –¥–ª—è –Ω–∏–∑–∫–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏
        return '<span class="accuracy-display accuracy-low">üìç –ù–∞—Å–µ–ª–µ–Ω–Ω—ã–π –ø—É–Ω–∫—Ç ‚Äî –Ω–∏–∑–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å</span>';
    } else if (accLower.includes('–Ω–µ –Ω–∞–π–¥–µ–Ω–æ') || accLower.includes('–æ—à–∏–±–∫–∞')) {
         // –§–æ—Ä–º–∞—Ç –¥–ª—è –æ—à–∏–±–∫–∏ (–æ—Å—Ç–∞–≤–ª—è–µ–º –ø—Ä–æ—Å—Ç—ã–º)
         return '<span class="accuracy-display accuracy-error">‚ùì –û—à–∏–±–∫–∞</span>';
    } else {
        // –§–æ—Ä–º–∞—Ç –¥–ª—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ (–æ—Å—Ç–∞–≤–ª—è–µ–º –ø—Ä–æ—Å—Ç—ã–º)
        return '<span class="accuracy-display accuracy-unknown">‚ùì –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ</span>';
    }
  }

  // --- –ù–û–í–´–ï –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò –î–õ–Ø –í–†–ï–ú–ï–ù–ò ---
  function parseTimeToMinutes(timeStr) {
    if (!timeStr || typeof timeStr !== 'string') return 0;
    let hours = 0;
    let minutes = 0;
    const hourMatch = timeStr.match(/(\d+)\s*—á/);
    const minMatch = timeStr.match(/(\d+)\s*–º–∏–Ω/);
    if (hourMatch) hours = parseInt(hourMatch[1], 10);
    if (minMatch) minutes = parseInt(minMatch[1], 10);
    return hours * 60 + minutes;
  }

  function formatMinutesToTime(totalMinutes) {
    if (isNaN(totalMinutes) || totalMinutes < 0) return '-';
    const hours = Math.floor(totalMinutes / 60);
    const minutes = Math.round(totalMinutes % 60); // –û–∫—Ä—É–≥–ª—è–µ–º –º–∏–Ω—É—Ç—ã
    let result = '';
    if (hours > 0) {
      result += hours + ' —á';
    }
    if (minutes > 0) {
      if (result) result += ' '; // –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–æ–±–µ–ª, –µ—Å–ª–∏ –µ—Å—Ç—å —á–∞—Å—ã
      result += minutes + ' –º–∏–Ω';
    }
    if (!result) { // –ï—Å–ª–∏ –ø–æ–ª—É—á–∏–ª–æ—Å—å 0—á 0–º–∏–Ω
       result = '0 –º–∏–Ω';
    }
    return result;
  }
  // ---------------------------------------------

  // --- –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ --- 
  function updateDisplay(selectedRouteId) {
    const data = exampleRouteData[selectedRouteId];
    if (!data) {
      console.error("–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∞:", selectedRouteId);
      // –ú–æ–∂–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—å –ø–æ–ª—è –∏–ª–∏ –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
      distanceValueEl.textContent = '-';
      durationValueEl.textContent = '-';
      totalTimeValueEl.textContent = '-';
      geocoderTableBody.innerHTML = '<tr><td colspan="5" style="text-align: center;">–û—à–∏–±–∫–∞: –¥–∞–Ω–Ω—ã–µ –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.</td></tr>';
      currentSelectedRouteId = null;
      // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å–ø–∏—Å–∫–∞
      document.querySelectorAll('.route-list-item.active').forEach(el => el.classList.remove('active'));
      if (routeNameHeaderEl) routeNameHeaderEl.textContent = '';
      return;
    }

    // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å –∏–º–µ–Ω–µ–º –º–∞—Ä—à—Ä—É—Ç–∞
    if (routeNameHeaderEl) {
        routeNameHeaderEl.textContent = data.name;
    }

    // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ-–∫–∞—Ä—Ç–æ—á–∫–∏
    // –ê–Ω–∏–º–∏—Ä—É–µ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ
    const newDistance = data.distance; // –°—Ç—Ä–æ–∫–∞ —Ç–∏–ø–∞ "123 –∫–º"
    animateCounter(distanceValueEl, previousDistance, newDistance, 500, ' –∫–º');
    previousDistance = newDistance; // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ä–∞–∑–∞

    // –ê–Ω–∏–º–∏—Ä—É–µ–º –≤—Ä–µ–º—è –≤ –ø—É—Ç–∏
    const newDuration = data.duration; 
    const newDurationMinutes = parseTimeToMinutes(newDuration);
    animateCounter(durationValueEl, previousDurationMinutes, newDurationMinutes, 500, '', formatMinutesToTime);
    previousDurationMinutes = newDurationMinutes; // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –º–∏–Ω—É—Ç–∞—Ö

    // –ê–Ω–∏–º–∏—Ä—É–µ–º –≤—Ä–µ–º—è –Ω–∞ –º–∞—Ä—à—Ä—É—Ç–µ
    const newTotalTime = data.totalTime;
    const newTotalTimeMinutes = parseTimeToMinutes(newTotalTime);
    animateCounter(totalTimeValueEl, previousTotalTimeMinutes, newTotalTimeMinutes, 500, '', formatMinutesToTime);
    previousTotalTimeMinutes = newTotalTimeMinutes; // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –º–∏–Ω—É—Ç–∞—Ö

    // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–±–ª–∏—Ü—É
    geocoderTableBody.innerHTML = ''; // –û—á–∏—â–∞–µ–º —Ç–∞–±–ª–∏—Ü—É
    if (data.points && data.points.length > 0) {
      // –ò—Å–ø–æ–ª—å–∑—É–µ–º forEach —Å –∏–Ω–¥–µ–∫—Å–æ–º
      data.points.forEach((point, index) => {
        const row = document.createElement('tr');
        // –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: —Å—Ç—Ä–æ–∫–∞ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –±—É–¥–µ—Ç –Ω–µ–≤–∏–¥–∏–º–∞ –∏–∑-–∑–∞ CSS

        row.innerHTML = `
          <td>${point.row}</td>
          <td><span class="address-text">${point.input}</span><span class="edit-icon">${pencilSvgIcon}</span></td>
          <td>${point.found}</td>
          <td>${point.coords}</td>
          <td>${getAccuracyDisplay(point.accuracy)}</td>
        `;

        // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å —Å—Ç—Ä–æ–∫–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ—á–Ω–æ—Å—Ç–∏
        const accLower = point.accuracy ? point.accuracy.toLowerCase() : '';
        if (accLower.includes('—Å—Ä–µ–¥–Ω—è—è') || accLower.includes('—É–ª–∏—Ü–∞') || accLower.includes('–ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã–π') || accLower.includes('–ø–µ—Ä–µ–∫—Ä–µ—Å—Ç–æ–∫')) {
            row.classList.add('row-accuracy-medium');
        } else if (accLower.includes('–Ω–∏–∑–∫–∞—è') || accLower.includes('–≥–æ—Ä–æ–¥') || accLower.includes('–æ–±–ª–∞—Å—Ç—å')) {
            row.classList.add('row-accuracy-low');
        }

        geocoderTableBody.appendChild(row);

        // –í–û–ó–í–†–ê–©–ê–ï–ú –ª–æ–≥–∏–∫—É setTimeout –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–æ–∫
        const delay = index * 60; // –ó–∞–¥–µ—Ä–∂–∫–∞ –≤ –º—Å (60–º—Å –º–µ–∂–¥—É —Å—Ç—Ä–æ–∫–∞–º–∏)
        setTimeout(() => {
            row.classList.add('row-visible');
        }, delay);
      });

      // --- –õ–û–ì–ò–ö–ê –ê–ù–ò–ú–ê–¶–ò–ò –í–´–°–û–¢–´ –¢–ê–ë–õ–ò–¶–´ (–æ—Å—Ç–∞–µ—Ç—Å—è) ---
      const tableWrapper = document.getElementById('table-scroll-wrapper');
      if (tableWrapper) {
          // 1. –ó–∞–ø–æ–º–∏–Ω–∞–µ–º —Ç–µ–∫—É—â—É—é –≤—ã—Å–æ—Ç—É
          const currentHeight = tableWrapper.offsetHeight + 'px';
          
          // 2. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º auto, —á—Ç–æ–±—ã –∏–∑–º–µ—Ä–∏—Ç—å –Ω—É–∂–Ω—É—é –≤—ã—Å–æ—Ç—É
          tableWrapper.style.height = 'auto';
          const targetHeight = tableWrapper.scrollHeight + 'px';
          
          // 3. –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞—Ä—É—é –≤—ã—Å–æ—Ç—É –ù–ï–ú–ï–î–õ–ï–ù–ù–û (–¥–æ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∏)
          tableWrapper.style.height = currentHeight;
          
          // 4. –í —Å–ª–µ–¥—É—é—â–µ–º –∫–∞–¥—Ä–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ü–µ–ª–µ–≤—É—é –≤—ã—Å–æ—Ç—É –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏
          requestAnimationFrame(() => {
              tableWrapper.style.height = targetHeight;
          });
      } else {
          console.error('#table-scroll-wrapper not found');
      }
      // --- –ö–û–ù–ï–¶ –õ–û–ì–ò–ö–ò –ê–ù–ò–ú–ê–¶–ò–ò –í–´–°–û–¢–´ ---

    } else {
      geocoderTableBody.innerHTML = '<tr><td colspan="5" style="text-align: center;">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —ç—Ç–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞.</td></tr>';
      if (routeNameHeaderEl) routeNameHeaderEl.textContent = '';
      // –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç, —Ç–æ–∂–µ –Ω—É–∂–Ω–æ –∞–Ω–∏–º–∏—Ä–æ–≤–∞—Ç—å –≤—ã—Å–æ—Ç—É –∫ –Ω—É–ª—é (–∏–ª–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π)
      const tableWrapper = document.getElementById('table-scroll-wrapper');
       if (tableWrapper) {
            const currentHeight = tableWrapper.offsetHeight + 'px';
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º 0px –∫–∞–∫ —Ü–µ–ª–µ–≤—É—é –≤—ã—Å–æ—Ç—É
            const targetHeight = '0px'; 
            tableWrapper.style.height = currentHeight;
            requestAnimationFrame(() => {
                tableWrapper.style.height = targetHeight;
            });
       }
    }

    // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤ —Å–ø–∏—Å–∫–µ
    if (currentSelectedRouteId) {
      const previousActiveElement = routeListContainer.querySelector(`[data-route-id="${currentSelectedRouteId}"]`);
      if (previousActiveElement) {
        previousActiveElement.classList.remove('active');
      }
    }
    const newActiveElement = routeListContainer.querySelector(`[data-route-id="${selectedRouteId}"]`);
    if (newActiveElement) {
      newActiveElement.classList.add('active');
    }
    currentSelectedRouteId = selectedRouteId;
  }

  // --- –ù–û–í–ê–Ø –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –ê–ù–ò–ú–ê–¶–ò–ò –ß–ò–°–ï–õ ---
  function animateCounter(element, start, end, duration, unit = '', formatter = null) {
    let startTime = null;
    
    // –£–±–∏—Ä–∞–µ–º –Ω–µ—á–∏—Å–ª–æ–≤—ã–µ —Å–∏–º–≤–æ–ª—ã –∏ –ø–∞—Ä—Å–∏–º –≤ —á–∏—Å–ª–æ (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–∞–∫ –µ—Å—Ç—å, –µ—Å–ª–∏ –Ω–µ —Å—Ç—Ä–æ–∫–∞)
    const startValue = typeof start === 'number' ? start : parseFloat(String(start).replace(/[^\d.-]/g, '')) || 0;
    const endValue = typeof end === 'number' ? end : parseFloat(String(end).replace(/[^\d.-]/g, '')) || 0;
    const range = endValue - startValue;

    // –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è —Å–æ–≤–ø–∞–¥–∞—é—Ç, –ø—Ä–æ—Å—Ç–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏ –≤—ã—Ö–æ–¥–∏–º
    if (range === 0) {
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º formatter, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å, –∏–Ω–∞—á–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
        element.textContent = formatter ? formatter(endValue) : Math.round(endValue) + unit;
        return;
    }

    const step = (timestamp) => {
      if (!startTime) startTime = timestamp;
      const progress = Math.min((timestamp - startTime) / duration, 1);
      const currentValue = startValue + range * progress;
      
      // –ò—Å–ø–æ–ª—å–∑—É–µ–º formatter, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å, –∏–Ω–∞—á–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
      element.textContent = formatter ? formatter(currentValue) : Math.round(currentValue) + unit;

      if (progress < 1) {
        requestAnimationFrame(step);
      } else {
         // –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–æ—á–Ω–æ–µ
         element.textContent = formatter ? formatter(endValue) : Math.round(endValue) + unit;
      }
    };

    requestAnimationFrame(step);
  }
  // ----------------------------------------

  // --- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–ø–∏—Å–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ --- 
  function initializeRouteList() {
      routeListContainer.innerHTML = ''; // –û—á–∏—â–∞–µ–º –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π
      const routeIds = Object.keys(exampleRouteData);

      if (routeIds.length === 0) {
          routeListContainer.innerHTML = '<li class="route-list-item">–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤</li>';
          return;
      }

      routeIds.forEach(routeId => {
          const route = exampleRouteData[routeId];
          const listItem = document.createElement('li');
          listItem.classList.add('route-list-item');
          listItem.setAttribute('data-route-id', routeId); // –î–æ–±–∞–≤–ª—è–µ–º ID –¥–ª—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞

          // –ü–æ–¥—Å—á–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç–∏ –¥–ª—è –∑–Ω–∞—á–∫–æ–≤
          let mediumCount = 0;
          let lowCount = 0;
          if (route.points && route.points.length > 0) {
              route.points.forEach(point => {
                  const accLower = point.accuracy ? point.accuracy.toLowerCase() : '';
                  // –°—Ä–µ–¥–Ω—è—è —Ç–æ—á–Ω–æ—Å—Ç—å
                  if (accLower.includes('—É–ª–∏—Ü–∞') || accLower.includes('–ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã–π') || accLower.includes('–ø–µ—Ä–µ–∫—Ä–µ—Å—Ç–æ–∫') || accLower.includes('–ø–∞—Ä–∫–æ–≤–∫–∞') || accLower.includes('–¥–æ—Ä–æ–≥–∞') || accLower.includes('–º–∞—Ä—à—Ä—É—Ç')) {
                      mediumCount++;
                  }
                  // –ù–∏–∑–∫–∞—è –∏ –æ—á–µ–Ω—å –Ω–∏–∑–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
                  else if (accLower.includes('–≥–æ—Ä–æ–¥') || accLower.includes('–æ–±–ª–∞—Å—Ç—å') || accLower.includes('—Ä–∞–π–æ–Ω') || accLower.includes('–ø–æ—Å–µ–ª–µ–Ω–∏–µ') || accLower.includes('–º–µ—Å—Ç–æ') || accLower.includes('–¥–µ–ª–µ–Ω–∏–µ') || accLower.includes('–∂–∏–ª–æ–π —Ä–∞–π–æ–Ω')) {
                      lowCount++;
                  }
                  // –í—ã—Å–æ–∫–∞—è, –æ—à–∏–±–∫–∞, –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ - –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º –¥–ª—è —Å—á–µ—Ç—á–∏–∫–æ–≤
              });
          }

          // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ HTML –¥–ª—è –∑–Ω–∞—á–∫–æ–≤
          let badgesHtml = '';
          if (mediumCount > 0) {
              badgesHtml += `<span class="accuracy-count-badge badge-medium">${mediumCount}</span>`;
          }
          if (lowCount > 0) {
              badgesHtml += `<span class="accuracy-count-badge badge-low">${lowCount}</span>`;
          }

          // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ HTML —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫–∞
          listItem.innerHTML = `
            <div class="route-list-item-content">
              <span class="route-name">${route.name}</span>
              <span class="route-badges">${badgesHtml}</span>
            </div>
          `;
          
          routeListContainer.appendChild(listItem);
      });

      // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–æ–≤ –Ω–∞ –≤–µ—Å—å —Å–ø–∏—Å–æ–∫ (–¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
      routeListContainer.addEventListener('click', (event) => {
          const targetItem = event.target.closest('.route-list-item'); // –ò—â–µ–º –±–ª–∏–∂–∞–π—à–∏–π —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞
          if (targetItem && targetItem.dataset.routeId) {
              const selectedRouteId = targetItem.dataset.routeId;
              if (selectedRouteId !== currentSelectedRouteId) { // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤—ã–±—Ä–∞–ª–∏ –¥—Ä—É–≥–æ–π –º–∞—Ä—à—Ä—É—Ç
                 updateDisplay(selectedRouteId);
              }
          }
      });

      // –í—ã–±–∏—Ä–∞–µ–º –ø–µ—Ä–≤—ã–π –º–∞—Ä—à—Ä—É—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º –µ–≥–æ –¥–∞–Ω–Ω—ã–µ
      const firstRouteId = routeIds[0];
      updateDisplay(firstRouteId);
   }

  // --- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Lottie –∞–Ω–∏–º–∞—Ü–∏–∏ --- 
  function initializeLottie() {
      if (lottieIconContainer) {
          lottiePlayer = document.createElement('lottie-player');
          lottiePlayer.setAttribute('src', '../frontend/static/animations/Animation - 1745303963639.json');
          lottiePlayer.setAttribute('background', 'transparent');
          lottiePlayer.setSpeed(1);
          lottiePlayer.style.width = '100%';
          lottiePlayer.style.height = '100%';

          try {
              lottieIconContainer.appendChild(lottiePlayer);
              console.log('Lottie player created and appended.');
          } catch (error) {
               console.error('Error appending lottie-player:', error);
          }
          
          lottiePlayer.addEventListener('ready', () => {
               console.log('Lottie player ready. Adding direction hover listeners.');
               // –ù–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–π –∫–∞–¥—Ä

              if (verticalRouteSelector) {
                  verticalRouteSelector.addEventListener('mouseenter', () => {
                      console.log('Mouse enter -> Set direction 1 & Play');
                      if (lottiePlayer) {
                          lottiePlayer.setDirection(1); // –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–ø–µ—Ä–µ–¥
                          lottiePlayer.play(); 
                      }
                  });

                  verticalRouteSelector.addEventListener('mouseleave', () => {
                       console.log('Mouse leave -> Set direction -1 & Play');
                      if (lottiePlayer) {
                          lottiePlayer.setDirection(-1); // –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–∑–∞–¥
                          lottiePlayer.play(); 
                      }
                  });
               } else {
                    console.error('verticalRouteSelector not found when adding hover listeners.');
               }
          });
          
           lottiePlayer.addEventListener('error', (e) => {
              console.error('Lottie player error:', e);
          });

      } else {
          console.error('lottieIconContainer not found when trying to initialize Lottie.');
      }
  }

  // --- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Lottie –¥–ª—è –∫–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ—Å—á–µ—Ç–∞ ---
  function initializeRecalculateLottie() {
      const container = document.getElementById('recalculate-lottie-container');
      if (container) {
          recalculateLottiePlayer = document.createElement('lottie-player');
          recalculateLottiePlayer.setAttribute('src', '../frontend/static/animations/Animation - 1745329291702.json'); // –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É
          recalculateLottiePlayer.setAttribute('background', 'transparent');
          recalculateLottiePlayer.setSpeed(1);
          recalculateLottiePlayer.style.width = '100%'; // –ó–∞–ø–æ–ª–Ω—è–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
          recalculateLottiePlayer.style.height = '100%';
          // –ù–ï —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º loop –∏–ª–∏ autoplay
          
          try {
              container.appendChild(recalculateLottiePlayer);
              console.log('Recalculate Lottie player created and appended.');
          } catch (error) {
               console.error('Error appending recalculate lottie-player:', error);
          }
          
           recalculateLottiePlayer.addEventListener('error', (e) => {
              console.error('Recalculate Lottie player error:', e);
          });

      } else {
          console.error('recalculate-lottie-container not found.');
      }
  }

  // --- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã --- 
  document.addEventListener('DOMContentLoaded', () => {
      initializeRouteList();
      initializeLottie();
      initializeRecalculateLottie(); // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–ª–µ–µ—Ä –∫–Ω–æ–ø–∫–∏
  });

  // --- –û–ë–†–ê–ë–û–¢–ß–ò–ö –ö–ù–û–ü–ö–ò –ü–ï–†–ï–°–ß–ï–¢–ê ---
  const recalculateBtn = document.getElementById('recalculate-button');
  if (recalculateBtn) {
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ (–æ—Å—Ç–∞–µ—Ç—Å—è –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è "–ø–µ—Ä–µ—Å—á–µ—Ç–∞")
      recalculateBtn.addEventListener('click', () => {
          const resultsLayout = recalculateBtn.closest('.results-layout');
          if (!resultsLayout || resultsLayout.classList.contains('recalculating')) {
              return; // –ù–µ –∑–∞–ø—É—Å–∫–∞–µ–º, –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω layout –∏–ª–∏ —É–∂–µ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è
          }

          console.log('Recalculating route...'); // –î–ª—è –æ—Ç–ª–∞–¥–∫–∏
          
          // –£–î–ê–õ–Ø–ï–ú –∑–∞–ø—É—Å–∫ –∞–Ω–∏–º–∞—Ü–∏–∏ –æ—Ç—Å—é–¥–∞
          /*
          if (recalculateLottiePlayer) {
             recalculateLottiePlayer.stop(); 
             recalculateLottiePlayer.play();
          }
          */
          
          resultsLayout.classList.add('recalculating');
          recalculateBtn.disabled = true;

          // –£–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å –∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
          setTimeout(() => {
              resultsLayout.classList.remove('recalculating');
              recalculateBtn.disabled = false;
              console.log('Recalculation finished.'); // –î–ª—è –æ—Ç–ª–∞–¥–∫–∏
          }, 3000);
      });

      // –î–û–ë–ê–í–õ–Ø–ï–ú –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏—è –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏
      recalculateBtn.addEventListener('mouseenter', () => {
          if (recalculateLottiePlayer) {
              recalculateLottiePlayer.stop();
              recalculateLottiePlayer.play();
          }
      });
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ mouseleave - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –ø–æ–∫–∞ –Ω–µ –¥–æ–±–∞–≤–ª—è–µ–º –æ—Å—Ç–∞–Ω–æ–≤–∫—É
      /*
      recalculateBtn.addEventListener('mouseleave', () => {
          if (recalculateLottiePlayer) {
              // recalculateLottiePlayer.stop(); // –ú–æ–∂–Ω–æ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–µ—Ä—ã–≤–∞—Ç—å
          }
      });
      */

  } else {
       console.error('#recalculate-button not found');
  }
  // -----------------------------------

  // --- –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–ï –ê–î–†–ï–°–ê –í –¢–ê–ë–õ–ò–¶–ï ---
  function startEditAddress(tdElement) {
      if (tdElement.classList.contains('editing')) {
          return; // –£–∂–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç—Å—è
      }

      const addressSpan = tdElement.querySelector('.address-text');
      const iconSpan = tdElement.querySelector('.edit-icon');
      if (!addressSpan) return;
      
      const originalText = addressSpan.textContent;
      
      // –°–æ–∑–¥–∞–µ–º input
      const input = document.createElement('input');
      input.type = 'text';
      input.value = originalText;
      input.dataset.originalValue = originalText; // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª –≤ data-–∞—Ç—Ä–∏–±—É—Ç–µ

      // –û—á–∏—â–∞–µ–º —è—á–µ–π–∫—É –∏ –¥–æ–±–∞–≤–ª—è–µ–º input
      tdElement.innerHTML = ''; 
      tdElement.appendChild(input);
      tdElement.classList.add('editing');
      input.focus();

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
      const finishEditing = () => {
          endEditAddress(input, tdElement);
          // –£–¥–∞–ª—è–µ–º —Å–ª—É—à–∞—Ç–µ–ª–∏ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è
          input.removeEventListener('blur', finishEditing);
          input.removeEventListener('keydown', handleKeyDown);
      };

      const handleKeyDown = (event) => {
          if (event.key === 'Enter') {
              finishEditing();
          } else if (event.key === 'Escape') {
               // –û—Ç–º–µ–Ω–∞: –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç –∏ SVG
               tdElement.innerHTML = `<span class="address-text">${originalText}</span><span class="edit-icon">${pencilSvgIcon}</span>`;
               tdElement.classList.remove('editing');
               input.removeEventListener('blur', finishEditing);
               input.removeEventListener('keydown', handleKeyDown);
          }
      };

      input.addEventListener('blur', finishEditing);
      input.addEventListener('keydown', handleKeyDown);
  }

  function endEditAddress(inputElement, tdElement) {
      const newValue = inputElement.value.trim();
      const originalText = inputElement.dataset.originalValue;

      tdElement.classList.remove('editing');
      
      // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É —è—á–µ–π–∫–∏ —Å SVG
      tdElement.innerHTML = `<span class="address-text"></span><span class="edit-icon">${pencilSvgIcon}</span>`;
      const addressSpan = tdElement.querySelector('.address-text');

      if (newValue !== originalText && newValue !== '') {
          // –ó–Ω–∞—á–µ–Ω–∏–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å
          addressSpan.textContent = newValue;
          
          // –ü–ª–∞–≤–Ω–æ –æ—á–∏—â–∞–µ–º —Å–æ—Å–µ–¥–Ω–∏–µ —è—á–µ–π–∫–∏
          const foundAddressCell = tdElement.nextElementSibling;
          const coordsCell = foundAddressCell ? foundAddressCell.nextElementSibling : null;
          const accuracyCell = coordsCell ? coordsCell.nextElementSibling : null;
          const cellsToClear = [foundAddressCell, coordsCell, accuracyCell].filter(Boolean); // –ú–∞—Å—Å–∏–≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —è—á–µ–µ–∫
          
          cellsToClear.forEach(cell => cell.classList.add('cell-fading-out'));

          setTimeout(() => {
              if(foundAddressCell) foundAddressCell.textContent = '-';
              if(coordsCell) coordsCell.textContent = '-';
              if(accuracyCell) accuracyCell.innerHTML = '<span class="accuracy-display accuracy-unknown">‚ùì –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ—Å—á–µ—Ç</span>';
              
              // –£–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
              cellsToClear.forEach(cell => cell.classList.remove('cell-fading-out'));
          }, 300); // –ó–∞–¥–µ—Ä–∂–∫–∞ —Ä–∞–≤–Ω–∞ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ transition
          
          // –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –∑–¥–µ—Å—å –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ–º exampleRouteData, –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–∏–∑—É–∞–ª—å–Ω—ã–µ

      } else {
          // –ó–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –∏–ª–∏ —Å—Ç–∞–ª–æ –ø—É—Å—Ç—ã–º, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª
          addressSpan.textContent = originalText;
      }
  }

  // –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞ —Ç–µ–ª–æ —Ç–∞–±–ª–∏—Ü—ã
  geocoderTableBody.addEventListener('click', (event) => {
      const editIcon = event.target.closest('.edit-icon'); // –ò—â–µ–º .edit-icon —Å—Ä–µ–¥–∏ –ø—Ä–µ–¥–∫–æ–≤ –∫–ª–∏–∫–Ω—É—Ç–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
      if (editIcon) { // –ï—Å–ª–∏ –∫–ª–∏–∫ –±—ã–ª –Ω–∞ –∏–∫–æ–Ω–∫–µ –∏–ª–∏ –≤–Ω—É—Ç—Ä–∏ –Ω–µ–µ
          const td = editIcon.closest('td'); // –ù–∞—Ö–æ–¥–∏–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫—É—é —è—á–µ–π–∫—É
          if (td) {
              startEditAddress(td);
          }
      }
  });
  // ----------------------------------------

</script>

</body>
</html> 